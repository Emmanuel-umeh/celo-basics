import { useState } from 'react'
import Head from 'next/head'
import Link from 'next/link'
import Web3 from 'web3'
import { newKit } from '@celo/contractkit'
import Store from '../artifacts/contracts/Store.sol/Store.json'
import styles from '../styles/Home.module.css'

export default function Home() {

  const kit = newKit('https://alfajores-forno.celo-testnet.org')

  const [account, setAccount] = useState('j')
  const myItems = new Array(20).fill('')
  

  const connectCeloWallet = async function () {
    /*const balances = await kit.getTotalBalance()
    console.log(balances)
    if (window.celo) {
        notification("⚠️ Please approve this DApp to use it.")
      try {
        await window.celo.enable()
        const web3 = new Web3(window.celo)
        kit = newKitFromWeb3(web3)
        setAccount(kit.defaultAccount)
  
      } catch (error) {
        notification(`⚠️ ${error}.`)
      }
    } else {
      notification("⚠️ Please install the CeloExtensionWallet.")
    }*/
  }

  const unlistStore = () => {
    console.log('what are you waiting to unlist it')
  }

  const buyItem = () => {[
    console.log('buy it then')
  ]}

  return (
    <div className={styles.container}>
      <Head>
        <title>Celo Store</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        <nav>
          <h1>Celo Market</h1>
          <>
           {!account ? <button>Connect wallet</button> : <Link href={'/post-item'}>New product</Link>  }
          </>
        </nav>

        <div className={styles.items}>
          {
            myItems.map(item => <div className={styles.item}>
              <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSIe211cVjor6ImCg6L3MfUa9B9wgAKsQJp1Q&usqp=CAU" alt="" />
              <section>
                <h3>Nike Airforce</h3>
                <span>55$</span>
              </section>
              <button className={styles.delete} onClick={unlistStore}>Delete</button>
              <button onClick={buyItem}>Buy</button>
            </div> )
          }
        </div>
      </main>

      
    </div>
  )
}
